{% extends 'layout.html' %}
{% include 'header.html'%}
{% block content %}
<body>


  
   <div class="form-group">
    <div class="col-md-8 text-right">
      <h1 >CTS TMA</h1>
    
    </div>
    </div>

    <h1 style="   font-size: 50px;
    font-weight: 700;
    color:red ; padding: 0 55px;" >CTS TMA</h1>



    <div class="">
        <h1 style="text-align: center;">Thông Tin Cá Nhân</h1>
     <div style="padding: 0 100px;" class="form-group" >
        <img src="{{ url_for('static',filename=img )}}" style="height: 50px; width: 50px;"  />

        <fieldset>
            <div id="progressbar"></div>
            <input id="file" type="file" />
          </fieldset>
      </div>
      <div id="images"></div>

<script>
  function sse() {
      var source = new EventSource('/stream');
      source.onmessage = function(e) {
          if (e.data == '')
              return;
          var data = $.parseJSON(e.data);
          var upload_message = 'Image uploaded by ' + data['ip_addr'];
          var image = $('<img>', {alt: upload_message, src: data['src']});
          var container = $('<div>').hide();
          container.append($('<div>', {text: upload_message}));
          container.append(image);
          $('#images').prepend(container);
          image.load(function(){
              container.show('blind', {}, 1000);
          });
      };
  }
  function file_select_handler(to_upload) {
      var progressbar = $('#progressbar');
      var status = $('#status');
      var xhr = new XMLHttpRequest();
      xhr.upload.addEventListener('loadstart', function(e1){
          status.text('uploading image');
          progressbar.progressbar({max: e1.total});
      });
      xhr.upload.addEventListener('progress', function(e1){
          if (progressbar.progressbar('option', 'max') == 0)
              progressbar.progressbar('option', 'max', e1.total);
          progressbar.progressbar('value', e1.loaded);
      });
      xhr.onreadystatechange = function(e1) {
          if (this.readyState == 4)  {
              if (this.status == 200)
                  var text = 'upload complete: ' + this.responseText;
              else
                  var text = 'upload failed: code ' + this.status;
              status.html(text + '<br/>Select an image');
              progressbar.progressbar('destroy');
          }
      };
      xhr.open('POST', '/post', true);
      xhr.send(to_upload);
  };
  function handle_hover(e) {
      e.originalEvent.stopPropagation();
      e.originalEvent.preventDefault();
      e.target.className = (e.type == 'dragleave' || e.type == 'drop') ? '' : 'hover';
  }

  $('#drop').bind('drop', function(e) {
      handle_hover(e);
      if (e.originalEvent.dataTransfer.files.length < 1) {
          return;
      }
      file_select_handler(e.originalEvent.dataTransfer.files[0]);
  }).bind('dragenter dragleave dragover', handle_hover);
  $('#file').change(function(e){
      file_select_handler(e.target.files[0]);
      e.target.value = '';
  });
  sse();

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-510348-17']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>




    <form action= "/capnhat" method="POST"> 
    
   
    <div style="padding: 0 100px;" class="form-group">
    <div class="col-md-6.5 text-right">
        <label name ="editdiem" value =""><b>Điểm:</b></label>
        
    </div>
    </div>
    <div style="padding: 0 100px;" class="form-group">
      <label for="usr">Họ Tên:</label>
      <input type="text" class="form-control" value="" name="edithoten" required>
    </div>
    <div style="padding: 0 100px;" class="form-group">
     
                <div class="col">
                    <label for="pwd">Email:</label>
                    <input type="email" readonly class="form-control"value="" name="editemail" required>
                </div>
        </div>    
    </div>
       	
    </div>

    
    <div style="padding: 0 100px;" class = "form-group">
        <div class="col" align="center">
            <button type="submit" class="btn btn-primary">Cập Nhật</button>
        </div> 
        <div class="col-md-6.5 text-right">
        <a for="pwd" href="" data-toggle="modal" data-target="#myModal">Đổi mật khẩu</a>
        </div >
      </form>


        
        <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          
          <h4 class="modal-title" align = "center">Đổi Mật Khẩu</h4>
        </div>
        <div class="modal-body">
          <form action="/" method="POST">
           <div class="form-group">
                <label for="usr">Mật Khẩu Cũ:</label>
                <input type="password" class="form-control"name="editmkcu">
            </div>
            <div class="form-group">
                <label for="usr">Mật Khẩu Mới:</label>
                <input type="password" class="form-control" name="editmkcu">
            </div>
            <div class="form-group">
                <label for="usr">Nhập Lại Mật Khẩu Mới:</label>
                <input type="password" class="form-control" name="editmkcu">
            </div>

        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" type='submit'>Cập Nhật</button>
          <button type="button"class="btn btn-secondary" data-dismiss="modal">Đóng</button>
        </div>
      </form>
      
      </div>
      
    </div>
  </div>
  </form>
</div>
</body>

{% endblock  %}
<style>
    
  .notice {
    font-size: 80%;
  }


#drop {
    font-weight: bold;
    text-align: center;
    padding: 1em 0;
    margin: 1em 0;
    color: #555;
    border: 2px dashed #555;
    border-radius: 7px;
    cursor: default;
}

#drop.hover {
    color: #f00;
    border-color: #f00;
    border-style: solid;
    box-shadow: inset 0 3px 4px #888;
}

</style>
</style>